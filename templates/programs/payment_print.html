{% extends 'base.html' %}
{% load static %}
{% block title %}Payment Receipt — {{ student.first_name|default:student.legal_first_name }} {{ student.last_name }} — {{ program.name }}{% endblock %}
{% block extra_head %}
    <style>
        /* Hide the site navbar on the receipt page (screen and print) */
        nav, .navbar {
            display: none !important;
        }

        @media print {
            .no-print, .alert {
                display: none !important;
            }

            main.container {
                padding: 0 !important;
            }

            .card {
                border: none;
            }
        }

        .org-header {
            margin-bottom: .75rem;
        }

        .receipt-header {
            border-bottom: 2px solid #000;
            margin-bottom: 1rem;
            padding-bottom: .5rem;
        }
    </style>
{% endblock %}
{% block content %}
    <div class="row">
        <div class="col-lg-10 col-xl-8 text-end">
            <button class="btn btn-primary no-print " onclick="window.print()">Print</button>
        </div>
    </div>

    <div class="row">
      <div class="col-lg-10 col-xl-8 mb-3">
        <div class="org-header text-end">
            <img src="{% static 'img/cmu-text-logo.png' %}" alt="Carnegie Mellon University logo" class="img-fluid" style="max-width: 250px;">
            <div class="fw-bold">Girls of Steel Robotics</div>
            <div>Carnegie Mellon University</div>
            <div class="mb-2">EIN: 25-0969449</div>
            <div>5000 Forbes Ave</div>
            <div class="mb-2">Pittsburgh, PA 15213-3890</div>
            <div>cmu.edu</div>
        </div>

        <div class="d-flex justify-content-between align-items-start receipt-header">
            <div>
                <h1 class="h4 mb-1">Payment Receipt</h1>
                <div class="text-muted small">Date issued: {% now 'Y-m-d H:i' %}</div>
            </div>
        </div>

        <div class="mb-3">
          <div><span class="fw-semibold">Program:</span> {{ program.name }} -- {{ program.year }}</div>
          <div class="mb-2"><span class="fw-semibold">Participant's name:</span> {{ student.legal_first_name|default:student.first_name }} {{ student.last_name }}</div>

          <div class="card">
            <div class="card-body">
              <dl class="row mb-0">
                <dt class="col-sm-4">Fee</dt>
                <dd class="col-sm-8">{{ payment.fee.name }}</dd>

                <dt class="col-sm-4">Amount Paid</dt>
                <dd class="col-sm-8">${{ payment.amount|floatformat:2 }}</dd>

                <dt class="col-sm-4">Date Paid</dt>
                <dd class="col-sm-8">{{ payment.paid_on }}</dd>

                <dt class="col-sm-4">Payment Method</dt>
                <dd class="col-sm-8">{{ payment.get_paid_via_display }}</dd>

                {% if payment.check_number %}
                <dt class="col-sm-4">Check Number</dt>
                <dd class="col-sm-8">{{ payment.check_number }}</dd>
                {% endif %}

                {% if payment.camp_hours %}
                <dt class="col-sm-4">Camp Hours</dt>
                <dd class="col-sm-8">{{ payment.camp_hours }}</dd>
                {% endif %}

                {% if payment.notes %}
                <dt class="col-sm-4">Notes</dt>
                <dd class="col-sm-8">{{ payment.notes|linebreaksbr }}</dd>
                {% endif %}

                <dt class="col-sm-4">Receipt Generated</dt>
                <dd class="col-sm-8">{% now 'Y-m-d H:i' %}</dd>
              </dl>
            </div>
          </div>
        </div>

        <div class="mt-4 small text-muted">
          Thank you for your support! Please keep this receipt for your records.
        </div>
      </div>
    </div>
{% endblock %}
